!function(e){var t,r,n;t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},r=/[&<>"'\/]/g,n=function(e){return t[e]},function(){var e={"&":"\\u0026",">":"\\u003e","<":"\\u003c","\u2028":"\\u2028","\u2029":"\\u2029"},t=/[&><\u2028\u2029]/g,r=function(t){return e[t]}}();e.exports=function(e){var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:{};var r={},n=function(o){if(o in r)return r[o].exports;if(!e[o])throw new ReferenceError("module "+o+" is not found");var i=r[o]={exports:{}};return e[o].call(t,i,i.exports,n,t),i.exports};return n(0)}([function(e,t,r,n){"undefined"==typeof ya||void 0===ya.music||"function"!=typeof ya.music.Player||(r(1),r(5))},function(e,t,r,n){r(2),r(4)},function(e,t,r,n){if(r(3),"undefined"==typeof HTMLElement&&(HTMLElement=Element),Event.prototype.preventDefault||(Event.prototype.preventDefault=function(){this.returnValue=!1}),Event.prototype.stopPropagation||(Event.prototype.stopPropagation=function(){this.cancelBubble=!0}),!Element.prototype.addEventListener){var o=[],i=function(e,t){var r=this,n=function(e){e.target=e.srcElement,e.currentTarget=r,t.handleEvent?t.handleEvent(e):t.call(r,e)};if("DOMContentLoaded"==e){var i=function(e){"complete"==document.readyState&&n(e)};if(document.attachEvent("onreadystatechange",i),o.push({object:this,type:e,listener:t,wrapper:i}),"complete"==document.readyState){var a=new Event;a.srcElement=window,i(a)}}else this.attachEvent("on"+e,n),o.push({object:this,type:e,listener:t,wrapper:n})},a=function(e,t){for(var r=0;r<o.length;){var n=o[r];if(n.object==this&&n.type==e&&n.listener==t){"DOMContentLoaded"==e?this.detachEvent("onreadystatechange",n.wrapper):this.detachEvent("on"+e,n.wrapper),o.splice(r,1);break}++r}};Element.prototype.addEventListener=i,Element.prototype.removeEventListener=a,HTMLDocument&&(HTMLDocument.prototype.addEventListener=i,HTMLDocument.prototype.removeEventListener=a),Window&&(Window.prototype.addEventListener=i,Window.prototype.removeEventListener=a)}},function(e,t,r,n){"document"in self&&("classList"in document.createElement("_")?function(){"use strict";var e=document.createElement("_");if(e.classList.add("c1","c2"),!e.classList.contains("c2")){var t=function(e){var t=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){var r,n=arguments.length;for(r=0;r<n;r++)e=arguments[r],t.call(this,e)}};t("add"),t("remove")}if(e.classList.toggle("c3",!1),e.classList.contains("c3")){var r=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:r.call(this,e)}}e=null}():function(e){"use strict";if("Element"in e){var t=e.Element.prototype,r=Object,n=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array.prototype.indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1},i=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},a=function(e,t){if(""===t)throw new i("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new i("INVALID_CHARACTER_ERR","String contains an invalid character");return o.call(e,t)},s=function(e){for(var t=n.call(e.getAttribute("class")||""),r=t?t.split(/\s+/):[],o=0,i=r.length;o<i;o++)this.push(r[o]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},l=s.prototype=[],u=function(){return new s(this)};if(i.prototype=Error.prototype,l.item=function(e){return this[e]||null},l.contains=function(e){return-1!==a(this,e+="")},l.add=function(){var e,t=arguments,r=0,n=t.length,o=!1;do{e=t[r]+"",-1===a(this,e)&&(this.push(e),o=!0)}while(++r<n);o&&this._updateClassName()},l.remove=function(){var e,t,r=arguments,n=0,o=r.length,i=!1;do{for(e=r[n]+"",t=a(this,e);-1!==t;)this.splice(t,1),i=!0,t=a(this,e)}while(++n<o);i&&this._updateClassName()},l.toggle=function(e,t){e+="";var r=this.contains(e),n=r?!0!==t&&"remove":!1!==t&&"add";return n&&this[n](e),!0===t||!1===t?t:!r},l.toString=function(){return this.join(" ")},r.defineProperty){var c={get:u,enumerable:!0,configurable:!0};try{r.defineProperty(t,"classList",c)}catch(e){-2146823252===e.number&&(c.enumerable=!1,r.defineProperty(t,"classList",c))}}else r.prototype.__defineGetter__&&t.__defineGetter__("classList",u)}}(self))},function(e,t,r,n){Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var r;if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),o=n.length>>>0;if(0===o)return-1;var i=+t||0;if(Math.abs(i)===1/0&&(i=0),i>=o)return-1;for(r=Math.max(i>=0?i:o-Math.abs(i),0);r<o;){if(r in n&&n[r]===e)return r;r++}return-1}),Array.prototype.filter||(Array.prototype.filter=function(e){"use strict";if(null==this)throw new TypeError;var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=[],o=arguments.length>=2?arguments[1]:void 0,i=0;i<r;i++)if(i in t){var a=t[i];e.call(o,a,i,t)&&n.push(a)}return n}),Array.prototype.map||(Array.prototype.map=function(e,t){var r,n,o;if(null==this)throw new TypeError(" this is null or not defined");var i=Object(this),a=i.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(r=t),n=new Array(a),o=0;o<a;){var s,l;o in i&&(s=i[o],l=e.call(r,s,o,i),n[o]=l),o++}return n})},function(e,t,r,n){var o=r(6),i=r(9),a=r(10);r(11);var s,l,u=ya.music.Player,c=ya.music.Player.repeatTypes,f=ya.music.Player.audioEvents,p=ya.music.Player.playerEvents,d=ya.music.Player.sourceEvents,g=ya.music.Player.sourceTypes,y=new u({overlay:a.flash}),v=y.audio(),m=y.source(),h=0;"msie"===ya.music.info.browser.name&&ya.music.info.browser.version<9&&a.body.classList.add("miserable");var L=window.top===window?document.location.href:document.referrer;/\.kinopoisk\.ru/.test(L)&&a.body.classList.add("kinopoisk");var _=e.exports={player:y,audio:v,source:m,links:!0};i(_);var b=r(12),k=r(14);_.player.on(p.SOURCE,function(){"private"!==_.getInfo().visibility&&_.onSourceChange()}),_.player.on(p.TRACK_ERROR,function(){_.trigger("error")}),_.onStatus=function(){_.trigger("status",_.player.isPlaying())},_.player.on(p.STATE,_.onStatus),_.sendGoal=function(e,t){"undefined"!=typeof yaCounter32056676&&yaCounter32056676.reachGoal(e,t)},_.player.readyPromise().then(function(){_.trigger("ready",_.audio.getType(),!_.audio.isDeviceVolume()),_.trigger("volume",_.audio.getVolume())},_.sendGoal.bind(null,"NO_PLAYER",{counter:1})),_.audio.on(f.TIME,function(e){_.trigger("time",e)}),_.audio.on(f.VOLUME,function(e){_.trigger("volume",e)}),_.source.on(d.UPDATE,function(){_.onSourceUpdate.apply(_,arguments)}),_.source.on(d.CONTROLS,function(){_.onControls.apply(_,arguments),"track"===_.getType()&&_.onTrackUpdate(_.source.getCurrent())}),_.source.on(d.POPULATE,function(){_.onSourcePopulate.apply(_,arguments)}),_.setLang=function(e){u.settings.setRequestsGlobal({lang:e})},_.setSid=function(e){_.sid=e,_.trigger("sid",e),_.toggleLinks("telegram"!==_.sid),u.settings.setRequestsGlobal({"external-sid":e})},_.toggleLinks=function(e){_.links!=e&&(_.links=e,_.links?document.removeEventListener("click",_.disableLinkClick):document.addEventListener("click",_.disableLinkClick))},_.disableLinkClick=function(e){o.isLink(e.target)&&e.preventDefault()},_.toggleAutoplay=function(e){_.autoplay=e},_.setStartPosition=function(e){_.startPosition=e},_.toggleShuffle=function(e){return _.source?_.shuffle=_.source.toggleShuffle(e):_.shuffle=null==e?!_.shuffle:e,_.trigger("shuffle",_.shuffle),_.shuffle},_.play=function(e){if(k.notFree)_.trigger("error","bad-region");else if(u.mini)if(_.player.isPlaying())_.audio.togglePause(!0);else if(_.player.isPaused())_.audio.togglePause(!1);else{var t=_.player.play();if(_.startPosition){var r=_.startPosition;t.then(function(){_.setPosition(r)}),delete _.startPosition}}else e==_.getIndex()&&(e=null),null==e&&_.player.isPlaying()?_.audio.togglePause(!0):null==e&&_.player.isPaused()?_.audio.togglePause(!1):"radio"===_.source.getType()?(_.source.setIndex(e),_.player.play()):_.source.setIndex(e).then(function(){var e=_.player.play();if(_.startPosition){var t=_.startPosition;e.then(function(){_.setPosition(t)}),delete _.startPosition}})},_.stop=function(){_.player.stop(),_.track=null,_.trigger("cleanup")},_.next=function(){"track"!==_.source.getType()&&_.source.next()},_.prev=function(){"track"!==_.source.getType()&&_.source.prev()},_.getList=function(){return _.source.getList()},_.getIndex=function(){return _.source.getIndex()},_.getInfo=function(){return _.source.getInfo()},_.getConfig=function(){return _.source.getConfig()},_.getType=function(){return _.source.getType()},_.populate=function(e,t){return e=isFinite(e)?e:0,t=isFinite(t)?t:6,_.source.populate(e,Math.ceil(t/2),Math.ceil(t/2))},_.isStarted=function(){return!(!_.player.getTrack()||!_.audio.getDuration())},_.setPosition=function(e){return _.audio.setPosition(e)},_.getPosition=function(){return _.audio.getPosition()},_.getDuration=function(){return _.audio.getDuration()},_.getLoaded=function(){return _.audio.getLoaded()},_.getPlayed=function(){return _.audio.getPlayed()},_.getVolume=function(){return _.audio.getVolume()},_.setVolume=function(e){return _.audio.setVolume(e)},_.toggleMute=function(){return _.audio.toggleMute()},_.setTrack=function(e,t,r){_.player.readyPromise().then(function(){_.setSource({from:"embedded-"+_.sid,type:g.TRACK,tracks:[e+(t?":"+t:"")]}).then(function(){_.getIndex()<0?_.toggleError(_):_.autoplay&&_.play()},function(){_.toggleError(_)}),"function"==typeof r&&r()})},_.setSource=function(e,t){var r=_.player.setSource(e);return u.mini?(r.then(function(){_.autoplay&&_.play()}),r.catch(function(){_.toggleError(_)}),r):(t&&t.id&&parseInt(t.id)&&r.then(function(){if(!t.albumId)for(var e=_.source.getList(),r=0;r<e.length;r++)if(e[r].id==t.id){t.albumId=e[r].albums&&e[r].albums.length&&e[r].albums[0].id;break}t.albumId&&_.source.selectTrack(t,!0)}),["track","common"].indexOf(e.type)>=0?_.source.toggleRepeat(c.NONE):_.source.toggleRepeat(c.ALL),r.then(function(){_.autoplay&&_.play()}),r.catch(function(){_.toggleError(_)}),r)},_.onTrackReady=function(){clearTimeout(l),l=setTimeout(_.sendPlayMetrics,12e5),_.onTrackUpdate.apply(_,arguments)},_.onTrackUpdate=function(e){_.track!==e&&e&&e.id&&(e=b(e),_.track=e,_.trigger("track",e),_.player.getTrack()!==e?_.trigger("time",{position:0,duration:1,loaded:0}):_.trigger("time",{position:_.getPosition(),duration:_.getDuration(),loaded:_.getLoaded()}),e.available&&!1!==e.embedPlayback||_.trigger("error-track",_.getIndex()))},_.onSourceChange=function(){_.wasFirstUpdated=!1},_.onSourceUpdate=function(e,t){var r=_.getType(),n=_.getInfo();if(t&&["album","artist","colla","playlist","radio"].indexOf(r)>=0&&_.trigger("playlist",_.getList().map(function(e){return b(e,!0)})),t&&(_.onTrackUpdate(_.source.getCurrent()),"track"===r&&_.trigger("info",r,_.source.getCurrent())),t&&["track","common"].indexOf(r)<0){var o=_.getList();for(var i in o)o.hasOwnProperty(i)&&(o[i]=b(o[i]));_.trigger("redraw",o)}e&&((_.player.isPlaying()||_.player.isPaused())&&_.trigger("playlist_index",_.getIndex()),"radio"===r&&(n.track=_.source.getCurrent()),["album","artist","playlist"].indexOf(r)>=0&&!_.wasFirstUpdated&&_.trigger("info",r,n),"private"===n.visibility&&_.toggleError(_)),_.wasFirstUpdated=!0},_.onSourcePopulate=function(e){for(var t in e)e.hasOwnProperty(t)&&(e[t]=b(e[t]));"track"===_.getType()&&_.onTrackUpdate(_.source.getCurrent()),_.trigger("redraw",e)},_.onControls=function(e){_.trigger("navInfo",e)},_.onAdvertStart=function(e,t,r){s={type:e,tag:t,data:r},_.sendGoal("ADV_SHOW",{"Аудио реклама":{"Показ":_.buildAdvMetric(e,t)}})},_.onAdvertBegin=function(e,t,r){s={type:e,tag:t,data:r},_.sendGoal("ADV_TRUE",{"Аудио реклама":{"Рекламное место":_.buildAdvMetric(e,t)}})},_.onAdvertReady=function(e,t){_.sendGoal("ADV_PLAY",{"Аудио реклама":{"Проигрывание":_.buildAdvMetric(e,t)}})},_.onAdvertPlay=function(e,t,r){s={type:e,tag:t,data:r},_.sendGoal("ADV_PLAYING",{"Аудио реклама":{"Воспроизведение":_.buildAdvMetric(e,t)}})},_.onAdvertEnd=function(e,t){_.sendGoal("ADV_END",{"Аудио реклама":{"Успешное завершение":_.buildAdvMetric(e,t)}})},_.onAdvertError=function(e,t,r,n){var o={};o[n]=_.buildAdvMetric(e,t),_.sendGoal("ADV_ERROR",{"Аудио реклама":{"Ошибка":o}})},_.onAdvertClick=function(){_.sendGoal("ADV_CLICK",{"Аудио реклама":{"Клик по рекламе":_.buildAdvMetric(s.type,s.tag)}})},_.onSeqEnd=function(){_.sendGoal("SEQUENCE_STOPED",{"Завершение очереди":1})},_.toggleError=function(e){_.toggleType("error"),_.toggleLayout("single"),_.trigger("fatalError",e)},_.toggleStyle=function(e,t){_.style=e,_.trigger("style",e,t&&t[0])},_.toggleType=function(e){_.trigger("type",e)},_.toggleLayout=function(e){_.layout=e,_.trigger("layout",e),_.trigger("volume",_.audio.getVolume())},_.toggleHeader=function(e){_.head=e,_.trigger("head",e?"head":"headless")},_.setOptions=function(e){_.options&&_.options.forEach(function(e){_.trigger("option",e,!1)}),_.options=[],_.options.push("title"),"artist"!==_.getType()&&_.options.push("subtitle"),"playlist"!==_.getType()&&"collaborative"!==_.getType()&&_.options.push("cover"),e&&e.forEach(function(e){-1===_.options.indexOf(e)&&_.options.push(e)}),_.options.forEach(function(e){_.trigger("option",e,!0)})},_.unsetOptions=function(e){e&&(-1!==e.indexOf("head")&&(e.push("title"),e.push("cover"),e.push("description")),-1!==e.indexOf("title")&&e.push("subtitle"),e.forEach(function(e){var t=_.options.indexOf(e);-1!==t&&(_.options.splice(t,1),_.trigger("option",e,!1))}))},_.toggleAnonymous=function(e){_.anonymos=e,e&&_.unsetOptions(["title","description","cover"]),_.trigger("anonymous",e)},_.sendPlayMetrics=function(e,t){var r;if(e){if(!t)return;r=t.played>h?t.played-h:t.played,h=0}else r=v.getPlayed(),h=r;clearTimeout(l),r<0?_.sendGoal("PLAY_BAD",{"Ошибка рассчётов метрики":{"Меньше нуля":1}}):r>3e4?_.sendGoal("PLAY_BAD",{"Ошибка рассчётов метрики":{"Превышен максимум":1}}):_.sendGoal("PLAY",{"Время прослушивания":{"Всего":r}})},_.buildAdvMetric=function(e,t){t=t||"simple";var r={};return r[e=e||"common"]={},r[e][t]=1,r},_.player.on(p.TRACK_READY,_.onTrackReady),_.player.on(p.TRACK_END,_.sendPlayMetrics),_.player.on(p.END,_.onSeqEnd),_.player.on(p.ADVERT_START,_.onAdvertStart),_.player.on(p.ADVERT_BEGIN,_.onAdvertBegin),_.player.on(p.ADVERT_READY,_.onAdvertReady),_.player.on(p.ADVERT_PLAY,_.onAdvertPlay),_.player.on(p.ADVERT_END,_.onAdvertEnd),_.player.on(p.ADVERT_ERROR,_.onAdvertError),_.player.on(p.ADVERT_CLICK,_.onAdvertClick),r(16),r(17),r(18),r(21),r(22),r(28),r(29),r(30),r(32),r(33),r(35)},function(e,t,r,n){var o=r(7).apply;t.htmlEscape=function(e){return void 0!==e&&null!=e||(e=""),(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},t.mergeObjects=function(e){var t,r=[].slice.call(arguments,1),n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);for(var o=0,i=r.length;o<i;o++)for(t in r[o])r[o].hasOwnProperty(t)&&(n[t]=r[o][t]);return n};var i=function(e){return(e=Math.floor(e))<10?"0"+e.toString():e};t.plural=function(e,t){if(1===e)return e+" "+t[0];if(10<e&&e<20)return e+" "+t[2];var r=e%10;return 1===r?e+" "+t[0]:1<r&&r<5?e+" "+t[1]:e+" "+t[2]},t.formatTime=function(e,r){e<0&&(e=0);var n=Math.floor(e/3600);e-=3600*n;var o=Math.floor(e/60);if(e=Math.floor(e-60*o),r){var a=[];return n&&a.push(t.plural(n,["час","часа","часов"])),o&&a.push(t.plural(o,["минута","минуты","минут"])),!n&&o<10&&e&&a.push(t.plural(e,["секунда","секунды","секунд"])),a.join(" ")}return(n?n+":"+i(o):o)+":"+i(e)},t.getOffsetLeft=function(e){var r=e.offsetLeft;return e.offsetParent&&(r+=t.getOffsetLeft(e.offsetParent)),r},t.getOffsetTop=function(e){var r=e.offsetTop;return e.offsetParent&&(r+=t.getOffsetTop(e.offsetParent)),r},t.loadImage=function(e,t){if(e){"function"!=typeof t&&(t=null);var r=function(){e.classList.remove("cover__image_loading"),e.classList.add("cover__image_loaded"),t&&t.call(e)};e.width>=30?r():e.addEventListener("load",r)}},t.getIndex=function(e){for(;e&&!e.classList.contains("track-entry");)e=e.parentNode;return e.getAttribute("data-index")-1},t.store=function(e,t){try{window.localStorage.setItem(e,t)}catch(r){document.cookie=e+"="+t}},t.trackId=function(e){if(!(e instanceof Object))return e;var t=o(".albums[0].id[0]",e);return e.id+(t?":"+t:"")},t.isLink=function(e){return"A"===e.nodeName||!!e.parentNode&&t.isLink(e.parentNode)}},function(e,t,r,n){e.exports=r(8)},function(e,t,r,n){"use strict";!function(){var t={PATH:1,SELECTOR:2,OBJ_PRED:3,POS_PRED:4,LOGICAL_EXPR:5,COMPARISON_EXPR:6,MATH_EXPR:7,CONCAT_EXPR:8,UNARY_EXPR:9,POS_EXPR:10,LITERAL:11},r=function(){var e,r,n,o,i={ID:1,NUM:2,STR:3,BOOL:4,NULL:5,PUNCT:6,EOP:7},a={UNEXP_TOKEN:'Unexpected token "%0"',UNEXP_EOP:"Unexpected end of path"};function s(){for(var e,r=l();m("|");)T(),(e||(e=[r])).push(l());return e?{type:t.CONCAT_EXPR,args:e}:r}function l(){return m("(")?u():f()}function u(){b("(");var e=s();b(")");for(var r,n=[];r=c();)n.push(r);return n.length?e.type===t.PATH?(e.parts=e.parts.concat(n),e):(n.unshift(e),{type:t.PATH,parts:n}):e}function c(){return m("[")?function(){b("[");var e=function(){if(m(":"))return T(),{type:t.POS_EXPR,toIdx:v()};var e=v();if(m(":"))return T(),m("]")?{type:t.POS_EXPR,fromIdx:e}:{type:t.POS_EXPR,fromIdx:e,toIdx:v()};return{type:t.POS_EXPR,idx:e}}();return b("]"),{type:t.POS_PRED,arg:e}}():m("{")?function(){b("{");var e=p();return b("}"),{type:t.OBJ_PRED,arg:e}}():m("(")?u():void 0}function f(){h()||A(T());var e,r=!1;m("^")?(T(),r=!0):_()&&(e=T().val.substr(1));for(var n,o=[];n=L()?function(){var e,r=T().val,n=k();(m("*")||n.type===i.ID||n.type===i.STR)&&(e=T().val);return{type:t.SELECTOR,selector:r,prop:e}}():c();)o.push(n);return{type:t.PATH,fromRoot:r,subst:e,parts:o}}function p(){for(var e,r=d();m("||");)T(),(e||(e=[r])).push(d());return e?{type:t.LOGICAL_EXPR,op:"||",args:e}:r}function d(){for(var e,r=g();m("&&");)T(),(e||(e=[r])).push(g());return e?{type:t.LOGICAL_EXPR,op:"&&",args:e}:r}function g(){for(var e=function e(){var r=function(){var e=y();for(;m("+")||m("-");)e={type:t.MATH_EXPR,op:T().val,args:[e,y()]};return e}();for(;m("<")||m(">")||m("<=")||m(">=");)r={type:t.COMPARISON_EXPR,op:T().val,args:[r,e()]};return r}();m("==")||m("!=")||m("===")||m("!==")||m("^==")||m("==^")||m("^=")||m("=^")||m("$==")||m("==$")||m("$=")||m("=$")||m("*==")||m("==*")||m("*=")||m("=*");)e={type:t.COMPARISON_EXPR,op:T().val,args:[e,g()]};return e}function y(){for(var e=v();m("*")||m("/")||m("%");)e={type:t.MATH_EXPR,op:T().val,args:[e,y()]};return e}function v(){return m("!")||m("-")?{type:t.UNARY_EXPR,op:T().val,arg:v()}:function(){var e=k().type;if(e===i.STR||e===i.NUM||e===i.BOOL||e===i.NULL)return{type:t.LITERAL,val:T().val};if(h())return f();if(m("("))return function(){b("(");var e=p();return b(")"),e}();return A(T())}()}function m(e){var t=k();return t.type===i.PUNCT&&t.val===e}function h(){return L()||_()||m("^")}function L(){var e=k();if(e.type===i.PUNCT){var t=e.val;return"."===t||".."===t}return!1}function _(){var e=k();return e.type===i.ID&&"$"===e.val[0]}function b(e){var t=T();t.type===i.PUNCT&&t.val===e||A(t)}function k(){if(null!==n)return n;var e=r;return n=E(),r=e,n}function E(){for(;t=e[r]," \r\n\t".indexOf(t)>-1;)++r;var t;if(r>=o)return{type:i.EOP,range:[r,r]};var n=function(){var t=r,n=e[r],o=e[r+1];if("."===n){if(S(o))return;return"."===e[++r]?{type:i.PUNCT,val:"..",range:[t,++r]}:{type:i.PUNCT,val:".",range:[t,r]}}if("="===o){var a=e[r+2];if("="===a){if("=!^$*".indexOf(n)>=0)return{type:i.PUNCT,val:n+o+a,range:[t,r+=3]}}else if("^$*".indexOf(a)>=0){if("="===n)return{type:i.PUNCT,val:n+o+a,range:[t,r+=3]}}else if("=!^$*><".indexOf(n)>=0)return{type:i.PUNCT,val:n+o,range:[t,r+=2]}}else if("="===n&&"^$*".indexOf(o)>=0)return{type:i.PUNCT,val:n+o,range:[t,r+=2]};if(n===o&&("|"===n||"&"===n))return{type:i.PUNCT,val:n+o,range:[t,r+=2]};if(":{}()[]^+-*/%!><|".indexOf(n)>=0)return{type:i.PUNCT,val:n,range:[t,++r]}}();if(n||(n=function(){var t=e[r];if(!P(t))return;var n=r,a=t;for(;++r<o&&w(t=e[r]);)a+=t;switch(a){case"true":case"false":return{type:i.BOOL,val:"true"===a,range:[n,r]};case"null":return{type:i.NULL,val:null,range:[n,r]};default:return{type:i.ID,val:a,range:[n,r]}}}())||(n=function(){if('"'!==e[r]&&"'"!==e[r])return;var t,n=e[r],a=++r,s="",l=!1;for(;r<o;){if("\\"===(t=e[r++]))t=e[r++];else if(('"'===t||"'"===t)&&t===n){l=!0;break}s+=t}if(l)return{type:i.STR,val:s,range:[a,r]}}())||(n=function(){var t=r,n=e[r],a="."===n;if(a||S(n)){for(var s=n;++r<o;){if("."===(n=e[r])){if(a)return;a=!0}else if(!S(n))break;s+=n}return{type:i.NUM,val:a?parseFloat(s):parseInt(s,10),range:[t,r]}}}()))return n;n={range:[r,r]},r>=o?n.type=i.EOP:n.val=e[r],A(n)}function T(){var e;return n?(r=n.range[1],e=n,n=null,e):E()}function S(e){return"0123456789".indexOf(e)>=0}function P(e){return"$"===e||"@"===e||"_"===e||e>="a"&&e<="z"||e>="A"&&e<="Z"}function w(e){return P(e)||e>="0"&&e<="9"}function A(e){e.type===i.EOP&&O(e,a.UNEXP_EOP),O(e,a.UNEXP_TOKEN,e.val)}function O(e,t){var r=Array.prototype.slice.call(arguments,2),n=t.replace(/%(\d)/g,function(e,t){return r[t]||""}),o=new Error(n);throw o.column=e.range[0],o}return function(t){e=t.split(""),r=0,n=null,o=e.length;var a=s(),l=T();return l.type!==i.EOP&&A(l),a}}(),n=function(){var e,r,n,o;function i(){if(o.length)return o.shift();var e="v"+ ++n;return r.push(e),e}function a(){for(var e=arguments,t=e.length;t--;)o.push(e[t])}function s(t,r,n){if(t.prop){var o=g(t.prop),s=i(),l=i(),u=i(),c=i(),f=i(),p=i(),d=i();e.push(s,"= [];",l,"= 0;",u,"=",n,".length;",d,"= [];","while(",l,"<",u,") {",c,"=",n,"[",l,"++];","if(",c,"!= null) {"),"*"===t.prop?(e.push("if(typeof ",c,'=== "object") {',"if(isArr(",c,")) {",s,"=",s,".concat(",c,");","}","else {","for(",f," in ",c,") {","if(",c,".hasOwnProperty(",f,")) {",p,"=",c,"[",f,"];"),y(s,p),e.push("}","}","}","}")):(e.push(p,"=",c,"[",o,"];"),y(s,p,d,u)),e.push("}","}",r,"=",u,"> 1 &&",d,".length?",d,".length > 1?","concat.apply(",s,",",d,") :",s,".concat(",d,"[0]) :",s,";"),a(s,l,u,c,f,p,d)}}function l(t,r,n){var o=t.prop,s=i(),l=i(),u=i(),c=i(),f=i(),p=i(),d=i(),g=i();e.push(s,"=",n,".slice(),",g,"= [];","while(",s,".length) {",l,"=",s,".shift();"),o?e.push("if(typeof ",l,'=== "object" &&',l,") {"):e.push("if(typeof ",l,"!= null) {"),e.push(u,"= [];","if(isArr(",l,")) {",c,"= 0,",d,"=",l,".length;","while(",c,"<",d,") {",p,"=",l,"[",c,"++];"),o&&e.push("if(typeof ",p,'=== "object") {'),y(u,p),o&&e.push("}"),e.push("}","}","else {"),o?"*"!==o&&(e.push(p,"=",l,'["'+o+'"];'),y(g,p)):(y(g,l),e.push("if(typeof ",l,'=== "object") {')),e.push("for(",f," in ",l,") {","if(",l,".hasOwnProperty(",f,")) {",p,"=",l,"[",f,"];"),y(u,p),"*"===o&&y(g,p),e.push("}","}"),o||e.push("}"),e.push("}",u,".length &&",s,".unshift.apply(",s,",",u,");","}","}",r,"=",g,";"),a(s,l,u,c,f,p,d,g)}function u(t,r,n){var o=i(),s=i(),l=i(),u=i(),c=i();e.push(o,"= [];",s,"= 0;",l,"=",n,".length;","while(",s,"<",l,") {",c,"=",n,"[",s,"++];"),f(t.arg,u,c),e.push(m(t.arg,u),"&&",o,".push(",c,");","}",r,"=",o,";"),a(o,s,l,c,u)}function c(t,r,n){var o,s,l=t.arg;if(l.idx){var u=i();return f(l.idx,u,n),e.push(u,"< 0 && (",u,"=",n,".length +",u,");",r,"=",n,"[",u,"] == null? [] : [",n,"[",u,"]];"),a(u),!1}l.fromIdx?l.toIdx?(f(l.fromIdx,o=i(),n),f(l.toIdx,s=i(),n),e.push(r,"=",n,".slice(",o,",",s,");"),a(o,s)):(f(l.fromIdx,o=i(),n),e.push(r,"=",n,".slice(",o,");"),a(o)):(f(l.toIdx,s=i(),n),e.push(r,"=",n,".slice(0,",s,");"),a(s))}function f(r,n,o){switch(r.type){case t.PATH:!function(r,n,o){var i=r.parts,a=0,f=i.length;for(e.push(n,"=",r.fromRoot?"data":r.subst?"subst."+r.subst:o,";","isArr("+n+") || ("+n+" = ["+n+"]);");a<f;){var p=i[a++];switch(p.type){case t.SELECTOR:".."===p.selector?l(p,n,n):s(p,n,n);break;case t.OBJ_PRED:u(p,n,n);break;case t.POS_PRED:c(p,n,n);break;case t.CONCAT_EXPR:d(p,n,n)}}}(r,n,o);break;case t.CONCAT_EXPR:d(r,n,o);break;case t.COMPARISON_EXPR:!function(r,n,o){var s=i(),l=i(),u=i(),c=i(),d=i(),g=i(),y=i(),v=i(),m=r.args[0],h=r.args[1];e.push(n,"= false;"),f(m,s,o),f(h,l,o);var L=m.type===t.PATH,_=h.type===t.LITERAL;e.push(u,"="),L?e.push("true;"):e.push("isArr(",s,");"),e.push(c,"="),_?e.push("false;"):e.push("isArr(",l,");"),e.push("if("),L||e.push(u,"&&"),e.push(s,".length === 1) {",s,"=",s,"[0];",u,"= false;","}"),_||e.push("if(",c,"&&",l,".length === 1) {",l,"=",l,"[0];",c,"= false;","}"),e.push(d,"= 0;","if(",u,") {",y,"=",s,".length;"),_||(e.push("if(",c,") {",v,"=",l,".length;","while(",d,"<",y,"&& !",n,") {",g,"= 0;","while(",g,"<",v,") {"),p(r.op,[s,"[",d,"]"].join(""),[l,"[",g,"]"].join("")),e.push(n,"= true;","break;","}","++",g,";","}","++",d,";","}","}","else {"));e.push("while(",d,"<",y,") {"),p(r.op,[s,"[",d,"]"].join(""),l),e.push(n,"= true;","break;","}","++",d,";","}"),_||e.push("}"),e.push("}"),_||(e.push("else if(",c,") {",v,"=",l,".length;","while(",d,"<",v,") {"),p(r.op,s,[l,"[",d,"]"].join("")),e.push(n,"= true;","break;","}","++",d,";","}","}"));e.push("else {",n,"=",S[r.op](s,l),";","}"),a(s,l,u,c,d,g,y,v)}(r,n,o);break;case t.MATH_EXPR:!function(t,r,n){var o=i(),s=i(),l=t.args;f(l[0],o,n),f(l[1],s,n),e.push(r,"=",S[t.op](h(l[0],o),h(l[1],s)),";"),a(o,s)}(r,n,o);break;case t.LOGICAL_EXPR:!function(t,r,n){var o,s=[],l=t.args,u=l.length,c=0;switch(e.push(r,"= false;"),t.op){case"&&":for(;c<u;)s.push(o=i()),f(l[c],o,n),e.push("if(",m(l[c++],o),") {");e.push(r,"= true;");break;case"||":for(;c<u;)s.push(o=i()),f(l[c],o,n),e.push("if(",m(l[c],o),") {",r,"= true;","}"),1+c++<u&&e.push("else {");--u}for(;u--;)e.push("}");a.apply(null,s)}(r,n,o);break;case t.UNARY_EXPR:!function(t,r,n){var o=i(),s=t.arg;switch(f(s,o,n),t.op){case"!":e.push(r,"= !",m(s,o)+";");break;case"-":e.push(r,"= -",h(s,o)+";")}a(o)}(r,n,o);break;case t.LITERAL:e.push(n,"="),y=r.val,e.push("string"==typeof y?g(y):null===y?"null":y),e.push(";")}var y}function p(t,r,n){e.push("if(",S[t](r,n),") {")}function d(t,r,n){for(var o=[],s=t.args,l=s.length,u=0;u<l;)o.push(i()),f(s[u],o[u++],n);e.push(r,"= concat.call(",o.join(","),");"),a.apply(null,o)}function g(e){return"'"+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"}function y(t,r,n,o){e.push("if(typeof ",r,'!== "undefined") {',"if(isArr(",r,")) {"),n&&(e.push(o,"> 1?"),v(n,r),e.push(":")),e.push(t,"=",t,".length?",t,".concat(",r,") :",r,".slice()",";","}","else {"),n&&e.push("if(",n,".length) {",t,"= concat.apply(",t,",",n,");",n,"= [];","}"),v(t,r),e.push(";","}","}")}function v(t,r){e.push(t,".length?",t,".push(",r,") :",t,"[0] =",r)}function m(e,r){switch(e.type){case t.LOGICAL_EXPR:return r;case t.LITERAL:return"!!"+r;case t.PATH:return r+".length > 0";default:return["(typeof ",r,'=== "boolean"?',r,":","isArr(",r,")?",r,".length > 0 : !!",r,")"].join("")}}function h(e,r){switch(e.type){case t.LITERAL:return r;case t.PATH:return r+"[0]";default:return["(isArr(",r,")?",r,"[0] : ",r,")"].join("")}}function L(e,t){return["typeof ",e,'=== "string" && typeof ',t,'=== "string" &&',e,".indexOf(",t,") === 0"].join("")}function _(e,t){return[e,"!= null &&",t,"!= null &&",e,".toString().toLowerCase().indexOf(",t,".toString().toLowerCase()) === 0"].join("")}function b(e,t){return["typeof ",e,'=== "string" && typeof ',t,'=== "string" &&',e,".length >=",t,".length &&",e,".lastIndexOf(",t,") ===",e,".length -",t,".length"].join("")}function k(e,t){return[e,"!= null &&",t,"!= null &&","(",e,"=",e,".toString()).length >=","(",t,"=",t,".toString()).length &&","(",e,".toLowerCase()).lastIndexOf(","(",t,".toLowerCase())) ===",e,".length -",t,".length"].join("")}function E(e,t){return["typeof ",e,'=== "string" && typeof ',t,'=== "string" &&',e,".indexOf(",t,") > -1"].join("")}function T(e,t){return[e,"!= null && ",t,"!= null &&",e,".toString().toLowerCase().indexOf(",t,".toString().toLowerCase()) > -1"].join("")}var S={"===":function(e,t){return e+"==="+t},"==":function(e,t){return["typeof ",e,'=== "string" && typeof ',t,'=== "string"?',e,".toLowerCase() ===",t,".toLowerCase() :"+e,"==",t].join("")},">=":function(e,t){return e+">="+t},">":function(e,t){return e+">"+t},"<=":function(e,t){return e+"<="+t},"<":function(e,t){return e+"<"+t},"!==":function(e,t){return e+"!=="+t},"!=":function(e,t){return e+"!="+t},"^==":L,"==^":function(e,t){return L(t,e)},"^=":_,"=^":function(e,t){return _(t,e)},"$==":b,"==$":function(e,t){return b(t,e)},"$=":k,"=$":function(e,t){return k(t,e)},"*==":E,"==*":function(e,t){return E(t,e)},"=*":function(e,t){return T(t,e)},"*=":T,"+":function(e,t){return e+"+"+t},"-":function(e,t){return e+"-"+t},"*":function(e,t){return e+"*"+t},"/":function(e,t){return e+"/"+t},"%":function(e,t){return e+"%"+t}};return function(i){if(e=[],r=["res"],n=0,o=[],f(i,"res","data"),e.unshift("var ",Array.isArray?"isArr = Array.isArray":'toStr = Object.prototype.toString, isArr = function(o) { return toStr.call(o) === "[object Array]"; }',", concat = Array.prototype.concat",",",r.join(","),";"),i.type===t.PATH){var a=i.parts[i.parts.length-1];a&&a.type===t.POS_PRED&&"idx"in a.arg&&e.push("res = res[0];")}return e.push("return res;"),e.join("")}}();function o(e){return Function("data,subst",n(r(e)))}var i={},a=[],s={cacheSize:100},l={cacheSize:function(e,t){if(t<e&&a.length>t)for(var r=a.splice(0,a.length-t),n=r.length;n--;)delete i[r[n]]}},u=function(e,t,r){return i[e]||(i[e]=o(e),a.push(e)>s.cacheSize&&delete i[a.shift()]),i[e](t,r||{})};u.version="0.3.4",u.params=function(e){if(!arguments.length)return s;for(var t in e)e.hasOwnProperty(t)&&(l[t]&&l[t](s[t],e[t]),s[t]=e[t])},u.compile=o,u.apply=u,"object"==typeof e&&"object"==typeof e.exports?e.exports=u:"object"==typeof modules?modules.define("jspath",function(e){e(u)}):"function"==typeof define?define(function(e,t,r){r.exports=u}):window.JSPath=u}()},function(e,t,r,n){var o="__eventCallbacks",i=function(e){return e instanceof Array},a=function(e){if(this.hasOwnProperty(o)){var t=this[o][e];if(i(t)){t=[].concat(t);for(var r=[].slice.call(arguments,1),n=0;n<t.length;n++)"function"==typeof t[n]&&t[n].apply(this,r)}}},s=function(e,t){if(this.hasOwnProperty(o)){var r=this[o][e];i(r)||(r=this[o][e]=[]),r.push(t)}},l=function(e,t){if(this.hasOwnProperty(o)){var r=this[o][e];if(i(r))for(var n=r.length;n-- >0;)r[n]!==t&&r[n].callback!==t||r.splice(n,1)}},u=function(e,t){var r=this,n=function(){r.off(e,n),t.apply(this,arguments)};n.callback=t,r.on(e,n)},c=function(){this[o]={}};e.exports=function(e){e[o]={},e.trigger=a,e.on=s,e.off=l,e.once=u,e.clearListeners=c}},function(e,t,r,n){var o={body:document.body,logo:document.querySelector(".music-logo"),trackCover:document.querySelector(".cover_track"),trackDesc:document.querySelector(".track-description_current"),header:document.querySelector(".header"),headerCover:document.querySelector(".block-header__cover"),headerBlock:document.querySelector(".block-header"),player:document.querySelector(".player"),timeline:document.querySelector(".progress"),volume:document.querySelector(".volume"),playlist:document.querySelector(".playlist"),playlistList:document.querySelector(".playlist__list"),playlistBlock:document.querySelector(".block-playlist"),suggest:document.querySelector(".suggest"),suggestAdd:document.querySelector(".suggest__add"),suggestInput:document.querySelector(".suggest__input"),suggestClear:document.querySelector(".suggest__clear"),suggestPopup:document.querySelector(".suggest__popup"),suggestList:document.querySelector(".suggest__list"),templates:document.querySelector(".templates"),flash:document.querySelector(".flash-overlay"),fatalError:document.querySelector(".fatal-error"),popup_single:document.querySelector(".player__popup"),popup_playlist:document.querySelector(".playlist__popup")};o.btnPrev=o.player.querySelector(".controls__prev"),o.btnPlay=o.player.querySelector(".controls__play"),o.btnNext=o.player.querySelector(".controls__next"),o.btnRepeat=o.player.querySelector(".controls__repeat"),o.btnShuffle=o.player.querySelector(".controls__shuffle"),o.btnLike=o.player.querySelector(".like__button"),o.btnDislike=o.player.querySelector(".dislike__button"),o.volumeMute=o.volume.querySelector(".volume__button"),o.volumeBar=o.volume.querySelector(".volume__bar"),o.volumeValue=o.volume.querySelector(".volume__value"),o.timelineBar=o.timeline.querySelector(".progress__bar"),o.timelineLoaded=o.timeline.querySelector(".progress__loaded"),o.timelinePlaying=o.timeline.querySelector(".progress__playing"),o.timesCurrent=o.timeline.querySelector(".progress__current"),o.timesTotal=o.timeline.querySelector(".progress__total"),e.exports=o},function(e,t,r,n){var o=r(10),i=r(7).apply,a=r(5),s={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;"},l=new RegExp(Object.keys(s).map(function(e){return"\\"+e}).join("|"),"g"),u={cover:o.templates.querySelector(".cover-tmpl").innerHTML,trackDesc:o.templates.querySelector(".track-description-tmpl").innerHTML,trackTitle:o.templates.querySelector(".track-description__title-tmpl").innerHTML,trackTitleNoLink:o.templates.querySelector(".track-description__title_nolink-tmpl").innerHTML,trackArtist:o.templates.querySelector(".track-description__artist-tmpl").innerHTML,trackArtistNoLink:o.templates.querySelector(".track-description__artist_nolink-tmpl").innerHTML,entry:o.templates.querySelector(".track-entry-tmpl").innerHTML,entry_loading:o.templates.querySelector(".track-entry-loading-tmpl").innerHTML,header:o.templates.querySelector(".header-tmpl").innerHTML,headerTitle:o.templates.querySelector(".header__title-tmpl").innerHTML,headerTitleNoLink:o.templates.querySelector(".header__title_nolink-tmpl").innerHTML,headerSubtitle:o.templates.querySelector(".header__subtitle-tmpl").innerHTML,headerSubtitleNoLink:o.templates.querySelector(".header__subtitle_nolink-tmpl").innerHTML,headerCover:o.templates.querySelector(".header__cover-tmpl").innerHTML,fatalError:o.templates.querySelector(".fatal-error-tmpl").innerHTML,fatalError_common:o.templates.querySelector(".fatal-error__track-tmpl").innerHTML,fatalError_track:o.templates.querySelector(".fatal-error__track-tmpl").innerHTML,fatalError_playlist:o.templates.querySelector(".fatal-error__playlist-tmpl").innerHTML,fatalError_album:o.templates.querySelector(".fatal-error__album-tmpl").innerHTML,fatalError_artist:o.templates.querySelector(".fatal-error__artist-tmpl").innerHTML,fatalError_radio:o.templates.querySelector(".fatal-error__radio-tmpl").innerHTML,fatalError_collaborative:o.templates.querySelector(".fatal-error__collaborative-tmpl").innerHTML,error:o.templates.querySelector(".error-tmpl").innerHTML,badRegion:o.templates.querySelector(".bad-region-tmpl").innerHTML,popup:o.templates.querySelector(".popup-tmpl").innerHTML};o.templates.parentNode.removeChild(o.templates),delete o.templates;var c=/yadisk/i,f=function(e,t){var r=c.test(t.id),n=[];return e=e.map(function(e,t){return n.push(e.name),p(e.various||r?"trackArtistNoLink":"trackArtist",e,t).value}).join(""),{dom:new d(e),title:new d(n.join(", ").replace(l,function(e){return s[e]}))}},p=function(e,t,r){return"playlist"===e?t.map(function(e,t){return p("entry",e,t).value}).join(""):("fatalError"===e&&(t.title=p("fatalError_"+t.getType(),t)),t instanceof Object||(t={id:t},e="entry_loading"),t.descriptionFormatted&&(t.description=new d(t.descriptionFormatted)),void 0!==r&&(t.index=r+1),"entry"!==e&&"header"!==e||(t.cover=t.coverUrl&&p("cover",t)),"header"===e&&(t.header_title=p(t.href_title?"headerTitle":"headerTitleNoLink",t),t.subtitle instanceof Array?t.header_subtitle=new d(t.subtitle.map(function(e,t){return t&&!e.prefix&&(e.prefix=", "),p(e.href?"headerSubtitle":"headerSubtitleNoLink",e).value}).join("")):t.header_subtitle=t.subtitle?p(t.subtitle.href?"headerSubtitle":"headerSubtitleNoLink",t.subtitle):""),"trackArtistNoLink"!==e&&"trackArtist"!==e||!t.prefix&&r&&(t.prefix=", "),"trackDesc"===e&&("album"===a.type?function(e){var t=i(".artists.id",a.info),r=i(".artists{.various == false}",e).filter(function(e){return-1===t.indexOf(e.id)});if(r.length){var n=f(r,e);e.subartists=n.dom,e.subartistsTitle=n.title}}(t):function(e){var t=i(".artists",e),r=f(t,e);e.subtitle=r.dom,e.subtitleText=r.title}(t),function(e){e.trackTitle=p(c.test(e.id)?"trackTitleNoLink":"trackTitle",e)}(t)),"entry"===e&&(t.description=p("trackDesc",t)),new d(u[e].replace(/##([^#]*)##/g,function(r,n){var o=i("."+n+"[0]",t);return o?"popup"===e?""+o:o instanceof d?o.value:(""+o).replace(l,function(e){return s[e]}):""})))},d=function(e){this.value=e||""};e.exports=function(){var e=p.apply(this,arguments);return e instanceof d?e.value:e}},function(e,t,r,n){var o=r(7).apply,i=r(6),a=r(13);e.exports=function(e){e=a.prepare(e);var t=o(".albums[0].coverUri[0]",e);t&&(e.coverUrl="//"+t.replace("%%","100x100"),e.coverUrlSmall="//"+t.replace("%%","50x50"));var r=o(".albums[0].id[0]",e);return e.link=(r?"/album/"+r:"")+"/track/"+e.id,e.href_title=e.link,e.votedClass=e.voted?" controls_voted":"",e.duration=i.formatTime(e.durationMs/1e3),e}},function(e,t,r,n){t.prepare=function(e){if(e.prepared)return e;var t=[];return e.artists&&e.artists.forEach(function(e){if(t.push(e),e.decomposed){var r="";e.decomposed.forEach(function(e){"string"==typeof e?r=e:(e.prefix=r,r="",t.push(e))}),delete e.decomposed}}),e.artists=t,e.prepared=!0,e}},function(e,t,r,n){var o=r(15),i=r(9),a={logged:!1,notFree:!1};i(a);var s=function(){ya.music.user.update().then(function(){a.notFree=ya.music.user.isNotFree(),a.logged!==ya.music.user.isLogged()&&(a.logged=ya.music.user.isLogged(),a.trigger(ya.music.user.isLogged()?"login":"logout"),a.trigger("state",ya.music.user.isLogged()))},function(e){console.error("Failed to get auth data",e)})};o(function(e){"wake"===e&&s()}),setTimeout(function(){s()},1),e.exports=a},function(e,t,r,n){var o=!0,i=function(){o||(o=!0,s("wake"))};window.addEventListener("focus",i),window.addEventListener("mouseover",i),window.addEventListener("blur",function(){o&&(o=!1,s("sleep"))});var a=[],s=function(e){a.forEach(function(t){t(e)})};e.exports=function(e){-1===a.indexOf(e)&&a.push(e)}},function(e,t,r,n){var o=r(10),i=r(5),a=r(14),s=/type_(\w+)/g,l=/layout_(\w+)/g,u=/[0-9a-f]{3,6}/i,c={title:!0},f={},p={title:24,subtitle:25,description:73,cover:330,min:38,playlistMin:150},d=function(){var e=o.body.offsetWidth,t=o.body.offsetHeight,r=document.getElementsByClassName("volume")[0],n=function(e){var t=0;return t+=e.offsetTop||0,e.offsetParent&&(t+=n(e.offsetParent)),t},a=n(r),s=p.min;Object.keys(c).forEach(function(e){c[e]&&f[e]&&(s+=p[e])}),e<600&&(s+=p.playlistMin),t<s?(o.body.classList.add("cover_deny"),o.body.classList.remove("cover_allow")):(o.body.classList.add("cover_allow"),o.body.classList.remove("cover_deny")),e>=600&&t>=s?(o.body.classList.add("view_columns"),o.body.classList.remove("view_single")):(o.body.classList.add("view_single"),o.body.classList.remove("view_columns")),a<90||"single"==i.layout?(o.body.classList.add("volume_horiz"),o.body.classList.remove("volume_vert"),i.volume="horiz"):(o.body.classList.add("volume_vert"),o.body.classList.remove("volume_horiz"),i.volume="vert"),i.trigger("update-layout")};i.on("type",function(e){[].slice.call(o.body.classList).forEach(function(e){s.test(e)&&o.body.classList.remove(e)}),o.body.classList.add("type_"+e),d()}),i.on("option",function(e,t){f[e]=t,t?("subtitle"===e&&(o.body.classList.add("layout_subtitle"),c.subtitle=!0),o.body.classList.add("options_"+e)):o.body.classList.remove("options_"+e),d()}),i.on("layout",function(e,t){if("single"===e||"playlist"===e)return[].slice.call(o.body.classList).forEach(function(e){l.test(e)&&o.body.classList.remove(e)}),Object.keys(c).forEach(function(e){c[e]=!1}),o.body.classList.add("layout_"+e),c[e]=!0,c.title=!0,void d();c[e]=t,t?o.body.classList.add("layout_"+e):o.body.classList.remove("layout_"+e),d()}),i.on("anonymous",function(e){c.anonymous=e,e?o.body.classList.add("layout_anonymous"):o.body.classList.remove("layout_anonymous"),d()}),i.on("status",function(e){e?(o.body.classList.remove("paused"),o.body.classList.add("playing")):(o.body.classList.remove("playing"),o.body.classList.add("paused"))}),i.on("style",function(e,t){o.body.classList.remove("white"),o.body.classList.remove("black"),o.body.classList.add(e),t&&u.test(t)?o.body.style.background="#"+t:o.body.style.background=""}),i.on("sid",function(e){o.body.classList.add("sid-"+e)}),i.on("ready",function(e,t){o.body.classList.add("engine_"+e),t||o.body.classList.add("volume_disabled")});var g=function(){i.off("track",g),i.off("playlist",g);var e=ya.music.info.platform.mobile||ya.music.info.platform.tablet;o.body.classList.add("platform_"+(e?"mobile":"pc")),setTimeout(function(){o.body.classList.add("loaded")},2e3)};i.on("track",g),i.on("playlist",g),a.on("state",function(e){o.body.classList.remove("auth_login"),o.body.classList.remove("auth_logout"),o.body.classList.add(e?"auth_login":"auth_logout")}),window.addEventListener("resize",d)},function(e,t,r,n){var o=r(10),i=r(11),a=r(5),s=r(6);a.on("track",function(e){"single"===a.layout&&(o.body.classList.remove("cover_on"),o.body.classList.add("cover_off")),e.coverUrl&&(o.trackCover.innerHTML=i("cover",e),"single"===a.layout?s.loadImage(o.trackCover.querySelector(".cover__image"),function(){o.body.classList.remove("cover_off"),o.body.classList.add("cover_on")}):s.loadImage(o.trackCover.querySelector(".cover__image")));var t=a.source.getCurrent(),r=a.source.isLiked(t),n=a.source.isDisliked(t);r?o.btnLike.classList.add("like__button-isliked"):o.btnLike.classList.remove("like__button-isliked"),n?o.btnDislike.classList.add("dislike__button-isdisliked"):o.btnDislike.classList.remove("dislike__button-isdisliked"),o.trackDesc.innerHTML=i("trackDesc",e)})},function(e,t,r,n){var o=r(10),i=r(11),a=r(19),s=r(5),l=r(6),u=r(20);o.playlistList.addEventListener("click",function(e){e.target.classList.contains("controls__play")?a.play(e.target):e.target.classList.contains("controls__add")?a.add(e,s.getList()):e.target.classList.contains("controls__remove")&&a.remove(e,s.getList())});var c=0;s.on("playlist",function(e){o.playlistList.innerHTML=i("playlist",e);var t=o.playlistList.querySelector(".track-entry");t&&(c=t.offsetHeight,[].forEach.call(o.playlistList.querySelectorAll(".cover__image"),l.loadImage),g())}),s.on("redraw",function(e){var t;for(var r in e)e.hasOwnProperty(r)&&((t=o.playlistList.querySelector(".track-entry_index-"+(+r+1))).innerHTML=i("entry",e[r],+r).replace(/<\/?li[^>]*>/gi,""),l.loadImage(t.querySelector(".cover__image")))}),s.on("playlist_index",function(e){var t=o.playlistList.querySelector(".track-entry_current");if(t&&t.classList.remove("track-entry_current"),t=o.playlistList.querySelector(".track-entry_index-"+(+e+1))){t.classList.add("track-entry_current");var r=l.getOffsetTop(t)-l.getOffsetTop(o.playlist),n=o.playlist.offsetHeight,i=o.playlistList.offsetHeight,a=o.playlist.scrollTop;(r-a<0||r+c-a>n)&&d(Math.min(r,i-n))}});var f,p=!1,d=function(e){if(!p){var t=(new Date).valueOf(),r=o.playlist.scrollTop;f&&clearInterval(f),o.playlist.classList.add("playlist_scrolling"),f=setInterval(function(){var n=Math.min(1,((new Date).valueOf()-t)/u.PLAYLIST_SCROLLING_TIME);o.playlist.scrollTop=r*(1-n)+e*n,1===n&&(f=clearInterval(f),o.playlist.classList.remove("playlist_scrolling"),g())},1)}},g=function(){if(!f){p=!0;var e=o.playlist.scrollTop,t=o.playlist.offsetHeight,r=Math.floor(e/c),n=r+Math.ceil(t/c)+1,i=n-r+1,a=Math.floor((r+n)/2);s.populate(a,i).then(function(){p=!1})}};o.playlist.addEventListener("scroll",g),window.addEventListener("resize",g)},function(e,t,r,n){var o=r(6),i=r(10),a=r(5),s={play:function(e){e.classList.contains("controls__play_disabled")||(e.classList.contains("controls_playlist")?a.play(o.getIndex(e)):a.play())},next:function(){a.next()},prev:function(){a.getPosition()>5?a.setPosition(0):a.prev()},add:function(e,t){var r=t[o.getIndex(e.target)];a.source.like(r)},remove:function(e,t){var r=t[o.getIndex(e.target)];a.source.unlike(r)},shuffle:function(e){a.toggleShuffle()?e.classList.add("controls_shuffle"):e.classList.remove("controls_shuffle")},toggleLike:function(e){var t=a.source.getCurrent();a.source.toggleLike(),a.source.isLiked(t)?(i.btnDislike.classList.remove("dislike__button-isdisliked"),e.classList.add("like__button-isliked")):e.classList.remove("like__button-isliked")},toggleDislike:function(e){var t=a.source.getCurrent();a.source.toggleDislike(),a.source.isDisliked(t)?(i.btnLike.classList.remove("like__button-isliked"),e.classList.add("dislike__button-isdisliked")):e.classList.remove("dislike__button-isdisliked")}},l=function(){var e,t,r=this===i.btnNext?"next":"prev",n=!1,o=function(){window.removeEventListener("mouseup",o),n||s[r](),e&&clearTimeout(e),t&&clearInterval(t)};e=setTimeout(function(){n=!0,t=setInterval(function(){a.setPosition(a.getPosition()+.5*("next"==r?1:-1))},50)},500),window.addEventListener("mouseup",o)};i.btnPlay.addEventListener("click",s.play.bind(null,i.btnPlay)),i.btnNext.addEventListener("mousedown",l.bind(i.btnNext)),i.btnPrev.addEventListener("mousedown",l.bind(i.btnPrev)),i.btnShuffle.addEventListener("click",s.shuffle.bind(null,i.btnShuffle)),i.btnLike.addEventListener("click",s.toggleLike.bind(null,i.btnLike)),i.btnDislike.addEventListener("click",s.toggleDislike.bind(null,i.btnDislike)),e.exports=s},function(e,t,r,n){e.exports={SID_PATTERN:/^[\d\w_]{1,50}$/,DEFAULT_SID:"unknown",HEADLESS_HASH_PART:"headless",ONELOVE_HASH_PART:"oneLove",PLAYLIST_SCROLLING_TIME:400}},function(e,t,r,n){var o,i,a=r(10),s=r(11),l=r(19),u=r(5),c=r(6),f=r(12),p=function(e){27==e.which&&d()},d=function(){a.suggest.classList.remove("suggest_edit"),a.suggest.classList.remove("suggest_open"),a.suggestInput.value="",i&&i.abort(),i=null,window.removeEventListener("keydown",p)};a.suggestList.addEventListener("click",function(e){e.target.classList.contains("controls__add")&&(l.add(e,g),d())}),a.suggestAdd.addEventListener("click",function(){a.suggest.classList.add("suggest_edit"),a.suggestInput.focus(),window.addEventListener("keydown",p)}),a.suggestClear.addEventListener("click",d),a.suggestInput.addEventListener("keydown",function(){o&&clearTimeout(o),o=setTimeout(y,300)});var g,y=function(){o=null,i&&i.abort(),(i=u.source.suggest(a.suggestInput.value)).then(v,m)},v=function(e){i=null,e.tracks&&e.tracks.length?(a.suggest.classList.add("suggest_open"),g=e.tracks.map(f),a.suggestList.innerHTML=s("playlist",g),[].forEach.call(a.suggestList.querySelectorAll(".cover__image"),c.loadImage)):a.suggest.classList.remove("suggest_open")},m=function(e){e&&(console.error("Suggest failed",e),a.suggest.classList.remove("suggest_open"))};e.exports=function(){return g}},function(e,t,r,n){var o,i=r(10),a=r(11),s=r(6),l=r(5),u={album:r(23),artist:r(24),playlist:r(25),collaborative:r(26),radio:r(27),track:r(12)};l.on("sid",function(e){o="unknown"!==e?e:"iframe"}),l.on("info",function(e,t){u[e]&&(t=u[e](t),i.header.innerHTML=a("header",t),i.body.classList.remove("cover_on"),i.body.classList.add("cover_off"),l.trigger("layout","cover",!1),l.trigger("layout","description",!!t.description),l.trigger("layout","subtitle",!!t.subtitle),i.headerCover.innerHTML=a("headerCover",t),t.coverUrl&&s.loadImage(i.headerCover.querySelector(".cover__image"),function(){i.body.classList.remove("cover_off"),i.body.classList.add("cover_on"),l.trigger("layout","cover",!0)}),function(e){var t=o?"?from="+o:"";e.href_title?i.logo.href=("/"==e.href_title[0]?"":"/")+e.href_title+t:i.logo.href="/"+t}(t))})},function(e,t,r,n){var o=r(13);e.exports=function(e){return(e=o.prepare(e)).version=e.year,e.coverUri&&(e.coverUrl="//"+e.coverUri.replace("%%","300x300"),e.coverUrlSmall="//"+e.coverUri.replace("%%","100x100")),e.href_title="/album/"+e.id,e.subtitle=e.artists.map(function(e){return{title:e.name,prefix:e.prefix,href:!e.various&&"/artist/"+e.id}}),e.subtitle.length||(e.subtitle=""),e}},function(e,t,r,n){var o=r(13);e.exports=function(e){return(e=o.prepare(e)).cover&&e.cover.uri&&(e.coverUrl="//"+e.cover.uri.replace("%%","300x300"),e.coverUrlSmall="//"+e.cover.uri.replace("%%","100x100")),e.title=e.name,e.href_title="/artist/"+e.id,e}},function(e,t,r,n){var o=r(13);e.exports=function(e){return(e=o.prepare(e)).href_title="/users/"+e.owner.login+"/playlists/"+e.id,e.subtitle={title:e.owner.name,href:"/users/"+e.owner.login+"/playlists/"},e.cover&&e.cover.uri&&(e.coverUri=e.cover.uri,/music(.mt|.qa)(?:\.crowdtest)?\.yandex/.test(document.location)&&(e.coverUri=e.coverUri.replace("avatars.yandex.net","avatars.pd.yandex.net"))),e.coverUri&&(e.coverUrl="//"+e.coverUri.replace("%%","300x300"),e.coverUrlSmall="//"+e.coverUri.replace("%%","100x100")),e}},function(e,t,r,n){var o=r(13);e.exports=function(e){return e=o.prepare(e)}},function(e,t,r,n){var o=r(13),i=r(12);e.exports=function(e){if((e=o.prepare(e)).href_title="/radio",e.track){var t=i(e.track);e.coverUrl=t.coverUrl,e.coverUrlSmall=t.coverUrlSmall}return e}},function(e,t,r,n){var o=r(6),i=r(10),a=r(5),s=function(e){i.timelinePlaying.style.width=(100*e).toFixed(2)+"%"},l=function(e){var t=i.timeline.offsetWidth,r=Math.max(0,Math.min(1,((e.pageX||e.screenX)-o.getOffsetLeft(i.timelineBar))/t));return s(r),r},u=function(e){i.timeline.classList.remove("progress_drag"),a.on("time",c),i.body.removeEventListener("mousemove",l),document.removeEventListener("mouseup",u),a.setPosition(a.getDuration()*l(e))},c=function(e){e.duration&&(i.timelineLoaded.style.width=(100*e.loaded/e.duration).toFixed(2)+"%",s(e.position/e.duration),i.timesCurrent.innerHTML=o.formatTime(e.position),i.timesTotal.innerHTML=o.formatTime(e.duration))};a.on("time",c),i.timeline.addEventListener("mousedown",function(e){e.preventDefault(),a.isStarted()&&(i.timeline.classList.add("progress_drag"),a.off("time",c),i.body.addEventListener("mousemove",l),document.addEventListener("mouseup",u))})},function(e,t,r,n){var o=r(6),i=r(10),a=r(5),s=function(e){"horiz"===a.volume?(i.volumeValue.style.width=(100*e).toFixed()+"%",i.volumeValue.style.height="100%"):(i.volumeValue.style.height=(100*e).toFixed()+"%",i.volumeValue.style.width="100%"),e>.5?(i.volumeMute.classList.remove("volume__button_half"),i.volumeMute.classList.remove("volume__button_off")):e>0?(i.volumeMute.classList.add("volume__button_half"),i.volumeMute.classList.remove("volume__button_off")):i.volumeMute.classList.add("volume__button_off")};a.on("volume",s),a.on("update-layout",function(){s(a.getVolume())});i.volume.addEventListener("mousewheel",function(e){e.preventDefault&&e.preventDefault();var t=(e=e.originalEvent?e.originalEvent:e).detail?-1*e.detail:e.wheelDelta;t=t>0?1:-1,a.setVolume(a.getVolume()+.02*t)}),i.volumeMute.addEventListener("click",a.toggleMute);var l=function(e){var t,r;"horiz"===a.volume?(r=(e.pageX||e.screenX)-o.getOffsetLeft(i.volumeBar),t=i.volumeBar.offsetWidth):(r=(e.pageY||e.screenX)-o.getOffsetTop(i.volumeBar),t=i.volumeBar.offsetHeight),a.setVolume((t-Math.min(t,Math.max(0,r)))/t)},u=function(e){i.volume.classList.remove("volume_drag"),i.body.removeEventListener("mousemove",l),document.removeEventListener("mouseup",u),l(e)};i.volumeBar.addEventListener("mousedown",function(e){e.preventDefault(),i.volume.classList.add("volume_drag"),i.body.addEventListener("mousemove",l),document.addEventListener("mouseup",u)})},function(e,t,r,n){var o=r(5),i={yandexafisha:r(31)};o.on("sid",function(e){i[e]&&i[e]()})},function(e,t,r,n){var o=r(10);e.exports=function(){o.logo.innerHTML=i18n_strings.logo_placeholder}},function(e,t,r,n){var o,i,a,s=r(10),l=r(5),u=l.player,c=(l.audio,[s.btnPlay,s.btnNext,s.btnPrev]),f=s.flash,p=ya.music.Audio,d=function(e){for(var t=0;e.parentNode;)t+=(e=e.parentNode).scrollTop||0;return t},g=function(){f.style.left="-9999px",f.style.top="-9999px",o&&o.classList.remove("hover"),i&&i.classList.remove("hover")},y=function(){o&&o,a=setTimeout(v,3e3)},v=function(){u.player.trigger("failed",new Error("Init timeout failed"))};f.addEventListener("mouseout",g),f.addEventListener("mousedown",y,!0);var m=function(e){if(p._flash){var t=function(e){for(var t={y:e.offsetTop-d(e),x:e.offsetLeft};e.offsetParent;)e=e.offsetParent,t.y+=e.offsetTop,t.x+=e.offsetLeft;return t}(e.target);f.style.left=t.x+"px",f.style.top=t.y+"px";var r,n=e.target.offsetWidth,a=e.target.offsetHeight;f.style.width=n,f.style.height=a,p._flash.setAttribute("width",n),p._flash.setAttribute("height",a),r=e.target,i&&i.classList.remove("hover"),o&&o.classList.remove("hover"),(i=!!(o=r).parentNode.classList.contains("track-entry__playback")&&o.parentNode.parentNode)&&i.classList.add("hover")}},h=function(e){e.target.classList.contains("controls__play")&&m(e)};c.forEach(function(e){e.addEventListener("mousemove",m)}),s.playlistList.addEventListener("mousemove",h),u.readyPromise().then(function(){f.removeEventListener("mouseout",g),f.removeEventListener("click",y),c.forEach(function(e){e.removeEventListener("mousemove",m)}),s.playlistList.removeEventListener("mousemove",h),g(),a&&clearTimeout(a)})},function(e,t,r,n){var o=r(10),i=r(11),a=r(5),s=r(34),l=/yadisk/i;a.on("fatalError",function(e){switch(e.getType()){case"playlist":e.link="/users/"+e.getConfig().owner+"/playlists/"+e.getConfig().id;break;case"artist":e.link="/artist/"+e.getConfig().id;break;case"album":e.link="/album/"+e.getConfig().id;break;case"radio":"genre"===e.getConfig().type?e.link="/genre/"+e.getConfig().tag:"artist"===e.getConfig().type?e.link="/artist/"+e.getConfig().id:e.link="/";break;case"collaborative":e.link="/";break;case"track":e.albumId&&!l.test(e.trackId)?e.link="/album/"+e.albumId+"/track/"+e.trackId:e.link="/"}o.fatalError.innerHTML=i("fatalError",e)}),a.on("error",function(e){console.info("Error!!!"),"bad-region"!==e?s.showPopup(i("error",{})):s.showPopup(i("badRegion",{}))})},function(e,t,r,n){var o,i,a=r(10),s=r(11),l=r(5),u=function(){i=i&&clearTimeout(i),o&&(o.parentNode.removeChild(o),o=null)};t.showPopup=function(e){o&&u(),(o=document.createElement("div")).classList.add("popup"),o.innerHTML=s("popup",{content:e}),a["popup_"+l.layout].appendChild(o),o.querySelector(".popup__close").addEventListener("click",u),i=setTimeout(u,3e3)},t.removePopup=u},function(e,t,r,n){var o=r(20),i=r(5),a=o.DEFAULT_SID,s=null,l=ya.music.Player.sourceTypes,u=ya.music.Player.playerEvents,c=function(){i.stop(),i.toggleAutoplay(!1);var e=(window.location.hash.length?window.location.hash:"").split("/").map(function(e){return e.replace(/^#!?(.*?)$/,"$1")});i.toggleHeader(-1===e.indexOf(o.HEADLESS_HASH_PART));var t=/^(track|album|artist|radio|playlist|collaborative|genre|pop|language|white|black|show|hide|anonymous|autoplay|position|single)$/,r={oldSchool:[]},n="oldSchool";if(e.filter(function(e){return e!==o.HEADLESS_HASH_PART}).forEach(function(e){""!==e&&(t.test(e)?r[n=e]=[]:r[n].push(e))}),i.toggleStyle(r.black?"black":"white",r.black||r.white),r.oldSchool.length&&(-1!==r.oldSchool.indexOf("oneLove")?(r.oldSchool.splice(r.oldSchool.indexOf("oneLove"),1),r.track=r.oldSchool):r.playlist=r.oldSchool),delete r.oldSchool,Object.keys(r).length){var a;if(r.radio)if(r.artist){var c={},p=r.pop&&r.pop[0],d=r.language&&r.language[0];p&&(c.popFactor=p),d&&(c.language=d),a={type:"radio",config:{from:"embedded-"+i.sid,type:l.RADIO,config:{type:"artist",tag:r.artist[0]}}}}else r.genre&&(r.radio=["genre",r.genre[0]]),a={type:"radio",config:{from:"embedded-"+i.sid,type:l.RADIO,config:{type:r.radio[0],tag:r.radio[1]}}};else r.artist?a={type:"artist",config:{from:"embedded-"+i.sid,type:l.ARTIST,config:{id:r.artist[0]}},entry:{id:r.artist[1]}}:r.album?a={type:"album",config:{from:"embedded-"+i.sid,type:l.ALBUM,config:{id:r.album[0]}},entry:{id:r.album[1],albumId:r.album[0]}}:r.playlist?(r.playlist.length>=2&&(s=decodeURIComponent(r.playlist[0]),r.playlist[0]=r.playlist[1]),a={type:"playlist",config:{from:"embedded-"+i.sid,type:l.PLAYLIST,config:{id:r.playlist[0],owner:s}},entry:{id:r.playlist[2]}}):r.collaborative;if(a&&i.player.readyPromise().then(function(){i.setSource(a.config,a.entry),f(a.type,r.single)}),r.position&&i.setStartPosition(r.position),r.autoplay&&i.toggleAutoplay(!0),i.player.once(u.SOURCE,function(){i.setOptions(r.show),i.unsetOptions(r.hide),i.toggleAnonymous(!!r.anonymous)}),r.track){var g=r.track[1]?r.track[0]:r.track[0].split(":")[0],y=r.track[1]?r.track[1]:r.track[0].split(":")[1];i.setTrack(g,y),f("track",r.single)}}},f=function(e,t){switch(e=e||i.getType()){case"track":case"common":i.toggleType("track"),i.toggleLayout("single");break;case"radio":i.toggleType("radio"),i.toggleLayout(t?"single":"playlist");break;default:i.toggleType(e),i.toggleLayout(t?"single":"playlist")}};window.addEventListener("hashchange",c),function(){for(var e,t=(window.location.search.length?window.location.search.substring(1):"").replace(/&amp;/g,"&").split("&"),r=0,n=t.length;r<n;r++)2===(e=t[r].split("=")).length&&("sid"===e[0]&&((a=decodeURIComponent(e[1])).match(o.SID_PATTERN)||(a=o.DEFAULT_SID)),"login"!==e[0]&&"mode"!==e[0]||(s=decodeURIComponent(e[1])));i.setLang(/ua\/?$/.test(window.location.host)?"uk":"ru"),i.setSid(a),c()}()}])}("undefined"==typeof module?{}:module);